{
  "hash": "135882aae1d5aeb7c2945da19d6fa6df",
  "result": {
    "markdown": "---\ntitle: \"Conflicts of interest\"\nauthor: \"Charlotte Hadley\"\ndate: \"2023-09-01\"\ncategories: [news]\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.3     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(showtext)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: sysfonts\nLoading required package: showtextdb\n```\n:::\n\n```{.r .cell-code}\nlibrary(patchwork)\nlibrary(camcorder)\nlibrary(ggtext)\nlibrary(glue)\n\nlibrary(tidygraph)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'tidygraph'\n\nThe following object is masked from 'package:stats':\n\n    filter\n```\n:::\n\n```{.r .cell-code}\n# Load data ---------------------------------------------------------------\n\nfair_use_cases <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-08-29/fair_use_cases.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 251 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): case, court, jurisdiction, categories, outcome\ndbl (1): year\nlgl (1): fair_use_found\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nfair_use_findings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-08-29/fair_use_findings.csv')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 251 Columns: 9\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (9): title, case_number, year, court, key_facts, issue, holding, tags, o...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n## Graph\n\nWe want to see which categories appear together. This requires us to clean up the category column first:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncase_categories <- fair_use_cases %>% \n  separate_longer_delim(categories,\n                        delim = \";\") %>% \n  mutate(categories = str_trim(categories),\n         categories = str_to_sentence(categories)) %>% \n  select(case, categories) %>% \n  mutate(n_category = n(),\n         .by = categories) %>% \n  filter(n_category >= 10)\ncase_categories\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 516 × 3\n   case                                                    categories n_category\n   <chr>                                                   <chr>           <int>\n 1 De Fontbrune v. Wofsy, 39 F.4th 1214 (9th Cir. 2022)    Education…         56\n 2 De Fontbrune v. Wofsy, 39 F.4th 1214 (9th Cir. 2022)    Photograph         56\n 3 Sedlik v. Von Drachenberg, No. CV 21-1102 (C.D. Cal. M… Painting/…         31\n 4 Sedlik v. Von Drachenberg, No. CV 21-1102 (C.D. Cal. M… Photograph         56\n 5 Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No… Film/audi…         59\n 6 Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No… Music              25\n 7 Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No… Parody/sa…         33\n 8 Sketchworks Indus. Strength Comedy, Inc. v. Jacobs, No… Review/co…         41\n 9 Am. Soc'y for Testing & Materials v. Public.Resource.O… Education…         56\n10 Am. Soc'y for Testing & Materials v. Public.Resource.O… Textual w…         93\n# ℹ 506 more rows\n```\n:::\n:::\n\n\nTo begin turning this into a graph it's useful to create IDs for the nodes\n\n\n::: {.cell}\n\n:::\n\n\n![](images/colours.jpg)nodes_categories \\<- case_categories %\\>%\ndistinct(categories) %\\>%\narrange(categories) %\\>%\nmutate(id = row_number()) %\\>%\nselect(id, name = categories)\nnodes_categories\n\n![](images/colours-01.jpg)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}